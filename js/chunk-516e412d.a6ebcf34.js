(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-516e412d"],{"0b42":function(e,t,c){var n=c("da84"),o=c("e8b5"),r=c("68ee"),a=c("861d"),l=c("b622"),i=l("species"),s=n.Array;e.exports=function(e){var t;return o(e)&&(t=e.constructor,r(t)&&(t===s||o(t.prototype))?t=void 0:a(t)&&(t=t[i],null===t&&(t=void 0))),void 0===t?s:t}},"1dde":function(e,t,c){var n=c("d039"),o=c("b622"),r=c("2d00"),a=o("species");e.exports=function(e){return r>=51||!n((function(){var t=[],c=t.constructor={};return c[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"3e2b":function(e,t,c){"use strict";c.r(t);var n=c("7a23"),o=Object(n["createElementVNode"])("h3",{class:"text-center fw-bold py-3"},"產品列表",-1),r={class:"table"},a=Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",{scope:"col"},"圖片"),Object(n["createElementVNode"])("th",{scope:"col"},"商品名稱"),Object(n["createElementVNode"])("th",{scope:"col"},"價錢"),Object(n["createElementVNode"])("th",{scope:"col"})])],-1),l=["src"],i={key:0},s={key:1},d={key:2},u={class:"btn-group btn-group-sm",role:"group","aria-label":"Basic outlined example"},b=["onClick"],p=["onClick","disabled"],m={key:0,class:"spinner-grow spinner-grow-sm",role:"status"},j=Object(n["createElementVNode"])("span",{class:"visually-hidden"},"Loading...",-1),O=[j],h=Object(n["createTextVNode"])(" 加入購物車 "),f=Object(n["createElementVNode"])("h3",{class:"fw-bold text-center py-3"},"購物車列表",-1),g={class:"table"},E=Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",{scope:"col"}),Object(n["createElementVNode"])("th",{scope:"col"},"名稱"),Object(n["createElementVNode"])("th",{scope:"col"},"數量"),Object(n["createElementVNode"])("th",{scope:"col"},"單價")])],-1),V=["disabled","onClick"],N=Object(n["createElementVNode"])("i",{class:"bi bi-trash-fill"},null,-1),y=[N],k={class:"input-group input-group-sm mb-3"},v=["onUpdate:modelValue"],x={class:"input-group-text",id:"basic-addon1"},B={key:1},w=Object(n["createElementVNode"])("td",{colspan:"4",class:"text-center py-5"},[Object(n["createTextVNode"])(" 購物車目前尚無商品唷 ! "),Object(n["createElementVNode"])("br"),Object(n["createTextVNode"])(" 歡迎至賣場逛逛 ")],-1),C=[w];function D(e,t,c,j,N,w){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[o,Object(n["createElementVNode"])("table",r,[a,Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(N.userProducts,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:t},[Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("img",{src:e.imageUrl,alt:"item.title",style:{width:"100px"}},null,8,l)]),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.title),1),Object(n["createElementVNode"])("td",null,[e.price?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",i,"原價 "+Object(n["toDisplayString"])(e.origin_price)+" 元",1)),e.price?(Object(n["openBlock"])(),Object(n["createElementBlock"])("del",s,"原價 "+Object(n["toDisplayString"])(e.origin_price)+" 元",1)):Object(n["createCommentVNode"])("",!0),e.price?(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",d,"現在特價 "+Object(n["toDisplayString"])(e.price)+" 元",1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",u,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary",onClick:Object(n["withModifiers"])((function(t){return w.readMore(e.id)}),["prevent"])}," 查看更多 ",8,b),Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:Object(n["withModifiers"])((function(t){return w.addToCart(e.id)}),["prevent"]),disabled:N.status.loadingItem===e.id},[N.status.loadingItem===e.id?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",m,O)):Object(n["createCommentVNode"])("",!0),h],8,p)])])])})),128))])]),f,Object(n["createElementVNode"])("table",g,[E,Object(n["createElementVNode"])("tbody",null,[N.cartData.carts?(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],{key:0},Object(n["renderList"])(N.cartData.carts,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:t.id},[Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:N.cartData.id===t.id,onClick:Object(n["withModifiers"])((function(e){return w.delSingleProduct(t.id)}),["prevent"])},y,8,V)]),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.product.title),1),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",k,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"number",class:"form-control",placeholder:"Username","aria-label":"Username","aria-describedby":"basic-addon1","onUpdate:modelValue":function(e){return t.qty=e}},null,8,v),[[n["vModelText"],t.qty,void 0,{number:!0}]]),Object(n["createElementVNode"])("span",x,"/"+Object(n["toDisplayString"])(t.product.unit),1)])]),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.$filters.currency(t.product.price)),1)])})),128)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",B,C))])])],64)}c("99af");var S={inject:["emitter","pushMessageState"],data:function(){return{userProducts:[],cartData:{},status:{loadingItem:""}}},methods:{getUserProducts:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("hicarriet","/products");this.$http.get(t).then((function(t){e.userProducts=t.data.products}))},readMore:function(e){this.$router.push("/user/product/".concat(e))},addToCart:function(e){var t=this;this.status.loadingItem=e;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("hicarriet","/cart"),n={product_id:e,qty:1};this.$http.post(c,{data:n}).then((function(e){console.log(e),e.data.success&&(t.status.loadingItem="",t.getCart(),t.pushMessageState(e,"加入購物車"))}))},getCart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("hicarriet","/cart");this.$http.get(t).then((function(t){console.log(t),e.cartData=t.data.data}))},delSingleProduct:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("hicarriet","/cart/").concat(e);this.$http.delete(c).then((function(e){console.log(e),e.data.success&&(t.getCart(),t.pushMessageState(e,"購物車商品刪除"))}))}},mounted:function(){this.getUserProducts(),this.getCart()}},M=c("6b0d"),P=c.n(M);const T=P()(S,[["render",D]]);t["default"]=T},"65f0":function(e,t,c){var n=c("0b42");e.exports=function(e,t){return new(n(e))(0===t?0:t)}},8418:function(e,t,c){"use strict";var n=c("a04b"),o=c("9bf2"),r=c("5c6c");e.exports=function(e,t,c){var a=n(t);a in e?o.f(e,a,r(0,c)):e[a]=c}},"99af":function(e,t,c){"use strict";var n=c("23e7"),o=c("da84"),r=c("d039"),a=c("e8b5"),l=c("861d"),i=c("7b0b"),s=c("07fa"),d=c("8418"),u=c("65f0"),b=c("1dde"),p=c("b622"),m=c("2d00"),j=p("isConcatSpreadable"),O=9007199254740991,h="Maximum allowed index exceeded",f=o.TypeError,g=m>=51||!r((function(){var e=[];return e[j]=!1,e.concat()[0]!==e})),E=b("concat"),V=function(e){if(!l(e))return!1;var t=e[j];return void 0!==t?!!t:a(e)},N=!g||!E;n({target:"Array",proto:!0,forced:N},{concat:function(e){var t,c,n,o,r,a=i(this),l=u(a,0),b=0;for(t=-1,n=arguments.length;t<n;t++)if(r=-1===t?a:arguments[t],V(r)){if(o=s(r),b+o>O)throw f(h);for(c=0;c<o;c++,b++)c in r&&d(l,b,r[c])}else{if(b>=O)throw f(h);d(l,b++,r)}return l.length=b,l}})},e8b5:function(e,t,c){var n=c("c6b6");e.exports=Array.isArray||function(e){return"Array"==n(e)}}}]);
//# sourceMappingURL=chunk-516e412d.a6ebcf34.js.map